(()=>{"use strict";const t={powerUps:[],jugador:null,niveles:{"nivel-1":{jugado:!1,tiempo:0,estrellas:0},"nivel-2":{jugado:!1,tiempo:0,estrellas:0},"nivel-3":{jugado:!1,tiempo:0,estrellas:0},"nivel-4":{jugado:!1,tiempo:0,estrellas:0},"nivel-5":{jugado:!1,tiempo:0,estrellas:0}}};class e{constructor(){return localStorage.getItem("data")||localStorage.setItem("data",JSON.stringify(t)),e.instance||(e.instance=this),e.instance}#t(){return JSON.parse(localStorage.getItem("data"))}#e(t){localStorage.setItem("data",JSON.stringify(t))}setNombreJugador(t){const e=this.#t();e.jugador=t,this.#e(e)}getNombreJugador(){return this.#t().jugador}getPowerUps(){return this.#t().powerUps}consumirPowerUp(t){const e=this.#t(),a=e.powerUps.filter((e=>e.id!==t));e.powerUps=a,this.#e(e)}pushPowerUp(t){const e=this.#t(),a={nombre:t,id:Date.now().toString()};e.powerUps.push(a),this.#e(e)}setJuegoData(t,e,a,n){const o=this.#t();o.niveles[t].jugado=e,o.niveles[t].tiempo=a,o.niveles[t].estrellas=n,this.#e(o)}getJuegoData(t){return this.#t().niveles[t]}}class a{currentScene=null;constructor(){return a.instance||(a.instance=this),a.instance}async cargarPantalla(t){this.currentScene&&this.currentScene?.onDestroy();const e=document.getElementById("screen"),a=await fetch(`./templates/${t.template}`).then((t=>t.text()));e.innerHTML=a,t.loadLogic(),this.currentScene=t}}class n{dirPath="/build/assets/audio/";audio=null;constructor(t=null){t&&(this.audio=new Audio(this.dirPath+t))}definirBotone(t=new Document){const e=new Audio(this.dirPath+"hit.mp3"),a=new Audio(this.dirPath+"pop.mp3");t.addEventListener("click",(t=>{e.volume=.8,e.play()})),t.addEventListener("mouseenter",(t=>{a.volume=.6,a.play()}))}play(t=.5,e=!1){this.audio&&(this.audio.loop=e,this.audio.volume=t,this.audio.play())}stop(){this.audio&&this.audio.pause()}}const o={template:"mapa-niveles.html",posNivelesMapa:{"nivel-1":{top:"50px",left:"50px"},"nivel-2":{top:"150px",left:"150px"},"nivel-3":{top:"250px",left:"250px"},"nivel-4":{top:"150px",left:"300px"},"nivel-5":{top:"350px",left:"350px"}},juegosPorNiveles:{"nivel-1":{template:"juego1.html",loadLogic:function(){},onDestroy:function(){}},"nivel-2":{template:"juego2.html",loadLogic:function(){},onDestroy:function(){}},"nivel-3":{template:"juego3.html",loadLogic:function(){},onDestroy:function(){}},"nivel-4":{template:"juego4.html",loadLogic:function(){},onDestroy:function(){}},"nivel-5":{template:"juego5.html",loadLogic:function(){},onDestroy:function(){}}},loadLogic:function(){const t=document.getElementsByClassName("nivel"),o=new e,s=new n("mapaMusica.mp3");s.play(.5,!0),function(t,e=((t=new HTMLElement)=>{})){for(let a=0;a<t.length;a++)e(t[a])}(t,(t=>{(new n).definirBotone(t);const e=t.dataset.nivel;t.style.top=this.posNivelesMapa[e].top,t.style.left=this.posNivelesMapa[e].left,t.firstElementChild.innerText=e.split("-").join(" ");const i=o.getJuegoData(e);i.juegado?(t.lastElementChild.style.display="block",t.lastElementChild.src=`/build/assets/sprites/nivel-estrellas-${i.estrellas}.jpg`):t.lastElementChild.style.display="none",t.addEventListener("click",(t=>{s.stop(),(new a).cargarPantalla(this.juegosPorNiveles[e])}))}))},onDestroy:function(){}},s={template:"main-menu.html",loadLogic:function(){document.getElementById("play").addEventListener("click",(t=>{(new a).cargarPantalla(o)}))},onDestroy:function(){}};new e,(new a).cargarPantalla(s)})();